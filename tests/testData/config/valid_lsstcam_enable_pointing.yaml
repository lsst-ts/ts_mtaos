# Test lsstcam configuration. Values are changed from the default for testing
# purposes.
camera: lsstCam
instrument: lsst
data_path: /project/shared/lsst
run_name: mtaos_wep_lsst
collections: refcats,LSSTCam/raw/all,LSSTCam/calib,LSSTCam/unittest
pipeline_instrument:
  comcam: "lsst.obs.lsst.LsstComCamTest"
  lsstCam: "lsst.obs.lsst.LsstCamTest"
  lsstFamCam: "lsst.obs.lsst.LsstCamTest"
pipeline_n_processes: 123
zernike_table_name: zernikeEstimateRawTest
num_expected_tables: 8
num_expected_tables_min: 3
reference_detector: 2
visit_id_offset: 4000000000000
m1m3_stress_limit: 137900.0 # Pascals (approx. 20 psi)
m2_stress_limit: 344737.0 # Pascals (approx. 50 psi)
stress_scale_approach: "truncate"
stress_scale_factor: 1.25
elevation_delta_limit_max: 9.0
elevation_delta_limit_min: 4.0
rotation_delta_limit: 9.0
tilt_offset_threshold: 0.05
dz_threshold_min: 300.0
dz_threshold_max: 1500.0
max_ofc_consecutive_failures: 3
use_ocps: False
used_dofs: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
raise_on_large_defocus: True
closed_loop_timeout_without_images: 900.0 # seconds (15 minutes)
closed_loop_timeout_wep_results: 75.0 # seconds
closed_loop_filter_change_gain:
  n_iter: 2
  gain: [0.75, 0.0, 0.0]
enable_pointing_correction: true
pointing_correction_matrix:
  - [0.0, 0.0]                # 0 dzM2
  - [-6.272222e-06, 0.0]      # 1 dxM2 -> X: m2_dxy = -1.129/10.0*0.2/3600  # deg per micron
  - [0.0, -6.272222e-06]      # 2 dyM2 -> Y: m2_dxy = -1.129/10.0*0.2/3600  # deg per micron
  - [0.0, 0.74514]            # 3 RxM2 -> Y: m2_rxy = 37.257/10.0*0.2  # deg per deg
  - [0.74514, 0.0]            # 4 RyM2 -> X: m2_rxy = 37.257/10.0*0.2  # deg per deg
  - [0.0, 0.0]                # 5 dzCam
  - [-5.566667e-06, 0.0]      # 6 dxCam -> X: camera_dxy = -1.002/10.0*0.2/3600  # deg per micron
  - [0.0, -5.566667e-06]      # 7 dyCam -> Y: camera_dxy = -1.002/10.0*0.2/3600  # deg per micron
  - [0.0, 0.09834]            # 8 RxCam -> Y: camera_rxy = 4.917/10.0*0.2  # deg per deg
  - [0.09834, 0.0]            # 9 RyCam -> X: camera_rxy = 4.917/10.0*0.2  # deg per deg
  - [0.0, 0.0]  # 10 M1M3 B1
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]  # 30 M2 B1
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]
  - [0.0, 0.0]